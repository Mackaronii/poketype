(this["webpackJsonppoke-type"]=this["webpackJsonppoke-type"]||[]).push([[0],{19:function(e,t,r){e.exports=r(29)},29:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(16),c=r.n(o),s=r(5),i=r(6),d=r(8),l=r(7),u=r(9),p=(r(24),r(10)),m=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(d.a)(this,Object(l.a)(t).call(this,e))).state={wpm:"XX",acc:"XX"},r}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({wpm:e.wpm,acc:e.acc})}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("p",null,"WPM: ",this.state.wpm," | ACC: ",this.state.acc,"%"))}}]),t}(n.Component),h=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(d.a)(this,Object(l.a)(t).call(this,e))).state={promptWords:e.promptWords,curWordIndex:e.curWordIndex,correctIndices:e.correctIndices,wrongIndices:e.wrongIndices},r}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({promptWords:e.promptWords,curWordIndex:e.curWordIndex,correctIndices:e.correctIndices,wrongIndices:e.wrongIndices})}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{style:{marginBottom:"30px",textAlign:"left"}},this.state.promptWords.map((function(t,r){return a.a.createElement("p",{key:r,style:{display:"inline",fontSize:"18px",color:r===e.state.curWordIndex?"#D06AFF":e.state.correctIndices.includes(r)?"#69B23F":e.state.wrongIndices.includes(r)?"#D60000":"#000"}},t+" ")})))}}]),t}(n.Component),b=r(12),f=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(d.a)(this,Object(l.a)(t).call(this,e))).submitHandler=function(e){e.preventDefault()},r.state={isDisabled:e.isDisbled},r.changeHandler=e.changeHandler,r}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({isDisabled:e.isDisabled})}},{key:"render",value:function(){return a.a.createElement(b.a,{onSubmit:this.submitHandler},a.a.createElement(b.a.Control,{type:"text",onChange:this.changeHandler,disabled:this.state.isDisabled}))}}]),t}(n.Component),g=r(13),k=r(18);var v=function(e){var t=e.leaderboard;return t.map((function(e){e.date=new Date(e.date)})),a.a.createElement(k.a,{striped:!0,bordered:!0,hover:!0},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Rank"),a.a.createElement("th",null,"Username"),a.a.createElement("th",null,"WPM"),a.a.createElement("th",null,"ACC (%)"),a.a.createElement("th",null,"Attempted On"))),a.a.createElement("tbody",null,t.map((function(e,t){return a.a.createElement("tr",{key:t},a.a.createElement("td",null,t+1),a.a.createElement("td",null,e.username),a.a.createElement("td",null,e.wpm),a.a.createElement("td",null,e.acc),a.a.createElement("td",null,e.date.toLocaleString()))}))))},y=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(d.a)(this,Object(l.a)(t).call(this,e))).generateNewPrompt=function(){for(var e=r.state,t=e.prompts,n=e.prompt,a=Math.floor(Math.random()*t.length);n._id===t[a]._id;)a=Math.floor(Math.random()*t.length);var o=t[a];r.setState({hasStarted:!1,prompt:o,promptWords:o.fact.split(" "),curWordIndex:0,wrongIndices:[],correctIndices:[],wpm:"XX",acc:"XX",isInputDisabled:!1,isLeaderboardVisible:!1},(function(){r.setState({curWord:r.state.promptWords[0]})}))},r.retryPrompt=function(){r.setState({hasStarted:!1,curWord:r.state.promptWords[0],curWordIndex:0,wrongIndices:[],correctIndices:[],wpm:"XX",acc:"XX",isInputDisabled:!1})},r.changeHandler=function(e){if(!r.state.hasStarted){var t=Date.now();r.setState({hasStarted:!0,startTime:t}),console.log("Timer started: ".concat(t))}var n=e.target.value;if(r.isSpaceKeyPressed(n)){var a=n.substr(0,n.length-1);r.compareWord(a),e.target.value="",e.target.style.backgroundColor="#FFF"}else r.isLastWord(n)?(r.compareWord(n),e.target.value=""):n!==r.state.curWord.substr(0,n.length)?e.target.style.backgroundColor="#EE7878":e.target.style.backgroundColor="#FFF"},r.compareWord=function(e){r.state.curWord===e?r.state.correctIndices.push(r.state.curWordIndex):r.state.wrongIndices.push(r.state.curWordIndex),r.setState({curWordIndex:r.state.curWordIndex+1},(function(){r.state.curWordIndex<r.state.promptWords.length?r.setState({curWord:r.state.promptWords[r.state.curWordIndex]}):r.promptCompleted()}))},r.promptCompleted=function(){var e=Date.now();console.log("Timer ended: ".concat(e));var t=(e-r.state.startTime)/1e3,n=Math.round(r.state.correctIndices.length/t*60),a=r.state.correctIndices.length,o=r.state.promptWords.length,c=parseFloat((a/o*100).toFixed(2));r.setState({isInputDisabled:!0,wpm:n,acc:c},(function(){r.submitLeaderboardEntry(r.state.prompt._id,new Date,"test_user",n,c).then((function(){return r.getPokeFactLeaderboardById(r.state.prompt._id)})).then((function(e){return r.setState({pokefact_leaderboard:e,isLeaderboardVisible:!0})}))}))},r.isSpaceKeyPressed=function(e){return" "===e.substr(e.length-1)},r.isLastWord=function(e){return r.state.curWordIndex===r.state.promptWords.length-1&&e===r.state.curWord},r.state={hasStarted:!1,prompts:[],prompt:{},promptWords:[],curWordIndex:0,curWord:"",wrongIndices:[],correctIndices:[],wpm:"XX",acc:"XX",isInputDisabled:!1,isLeaderboardVisible:!1},r}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getAllPokeFacts().then((function(t){return e.setState({prompts:t},(function(){return e.generateNewPrompt()}))}))}},{key:"getAllPokeFacts",value:function(){return fetch("https://poketype-api.herokuapp.com/v1/pokefacts",{method:"GET"}).then((function(e){return e.json()}),(function(e){return console.error(e)})).then((function(e){return e.pokefacts}))}},{key:"submitLeaderboardEntry",value:function(e,t,r,n,a){var o={pokeFactId:e,date:t,username:r,wpm:n,acc:a};return fetch("https://poketype-api.herokuapp.com/v1/pokefact_leaderboards",{method:"POST",headers:{"Content-Type":"application/json",Connection:"keep-alive"},body:JSON.stringify(o)}).then((function(e){return console.log(e)}))}},{key:"getAllPokeFactLeaderboards",value:function(){return fetch("https://poketype-api.herokuapp.com/v1/pokefact_leaderboards",{method:"GET"}).then((function(e){return e.json()}),(function(e){return console.error(e)})).then((function(e){var t=e.pokefact_leaderboard;return console.log(t),t}))}},{key:"getPokeFactLeaderboardById",value:function(e){return fetch("https://poketype-api.herokuapp.com/v1/pokefact_leaderboards?id=".concat(e),{method:"GET"}).then((function(e){return e.json()}),(function(e){return console.error(e)})).then((function(e){var t=e.pokefact_leaderboard;return console.log(t),t}))}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement(m,{wpm:this.state.wpm,acc:this.state.acc}),a.a.createElement(p.a,{style:{backgroundColor:"#ECECEC",borderRadius:"10px",padding:"30px",marginBottom:"30px",textAlign:"center"}},a.a.createElement(h,{promptWords:this.state.promptWords,curWordIndex:this.state.curWordIndex,correctIndices:this.state.correctIndices,wrongIndices:this.state.wrongIndices}),a.a.createElement(f,{changeHandler:this.changeHandler,isDisabled:this.state.isInputDisabled}),a.a.createElement("div",{style:{marginTop:"30px"}},a.a.createElement(g.a,{variant:"primary",onClick:this.generateNewPrompt},"Give me another Pok\xe9Fact!"),a.a.createElement(g.a,{variant:"outline-dark",onClick:this.retryPrompt,style:{marginLeft:"20px"}},"Retry"))),this.state.isLeaderboardVisible?a.a.createElement("div",null,a.a.createElement("h5",null,"Pok\xe9Fact Leaderboard (ID: ",this.state.prompt._id,")"),a.a.createElement(v,{leaderboard:this.state.pokefact_leaderboard})):a.a.createElement("p",{style:{textAlign:"center"}},"Complete the Pok\xe9Fact above to view its leaderboards!"))}}]),t}(n.Component),I=function(e){function t(){return Object(s.a)(this,t),Object(d.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return a.a.createElement(p.a,{style:{paddingTop:"30px",paddingBottom:"30px",textAlign:"center",fontFamily:"Verdana"}},a.a.createElement("h4",{style:{marginBottom:"50px"}},"Pok\xe9Type"),a.a.createElement(y,null))}}]),t}(a.a.Component);c.a.render(a.a.createElement(I,null),document.getElementById("app"))}},[[19,1,2]]]);
//# sourceMappingURL=main.8d873ab9.chunk.js.map